# バイナリ実行時の依存関係

## 各言語のバイナリ配布における前提ソフトウェア

### 1. Python
#### スタンドアロンバイナリの場合
- **PyInstaller/Nuitka/PyOxidizer**: **前提ソフトウェア不要**
- Pythonランタイムが埋め込まれているため、エンドユーザーはPythonをインストールする必要なし
- ただし、OSレベルの依存関係（libc等）は必要

#### pip installの場合
- **Python環境が必須**（通常Python 3.8以上）
- pipコマンドが使用可能である必要がある

### 2. Node.js
#### スタンドアロンバイナリの場合（pkg/nexe）
- **前提ソフトウェア不要**
- Node.jsランタイムが埋め込まれているため、エンドユーザーはNode.jsをインストールする必要なし

#### npm/npxの場合
- **Node.js環境が必須**（通常Node.js 14以上）
- npmは通常Node.jsに同梱されている

### 3. Go
#### ビルド済みバイナリの場合
- **前提ソフトウェア不要**
- Goは完全に静的リンクされたバイナリを生成
- 標準ライブラリのみ使用の場合、OSレベルの依存もほぼなし
- CGOを無効化（`CGO_ENABLED=0`）すれば、完全にポータブル

#### go installの場合
- **Go環境が必須**（通常Go 1.19以上）
- ソースからビルドするため開発環境が必要

### 4. Rust
#### ビルド済みバイナリの場合
- **前提ソフトウェア不要**
- デフォルトで静的リンクされたバイナリを生成
- musl targetでビルドすれば、glibcにも依存しない完全静的バイナリが可能
  ```bash
  cargo build --target x86_64-unknown-linux-musl
  ```

#### cargo installの場合
- **Rust環境が必須**（Rust 1.70以上推奨）
- ソースからビルドするため、ビルド時間が長い（数分〜）

## 比較表：エンドユーザー視点

| 配布方法 | Python | Node.js | Go | Rust |
|---------|--------|---------|-----|------|
| **スタンドアロンバイナリ** | 依存なし | 依存なし | 依存なし | 依存なし |
| **パッケージマネージャー経由** | Python必須 | Node.js必須 | Go必須 | Rust必須 |
| **バイナリサイズ** | 50-100MB | 40-80MB | 5-20MB | 2-10MB |
| **起動速度** | 遅い | 中程度 | 速い | 最速 |

## 実際の配布例

### Go - 完全にポータブルなバイナリ
```bash
# ビルド時
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o smart-nippo-linux-amd64
CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build -o smart-nippo-darwin-amd64
CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build -o smart-nippo-windows-amd64.exe

# エンドユーザー
./smart-nippo-linux-amd64  # そのまま実行可能
```

### Rust - musl targetで完全静的バイナリ
```bash
# ビルド時
rustup target add x86_64-unknown-linux-musl
cargo build --release --target x86_64-unknown-linux-musl

# エンドユーザー
./smart-nippo  # glibcすら不要で実行可能
```

### Python - PyOxidizerでのバイナリ
```bash
# ビルド時
pyoxidizer build --release

# エンドユーザー
./smart-nippo  # Python不要で実行可能（ただし50MB以上）
```

## OS別の考慮事項

### Windows
- Visual C++ Redistributableが必要な場合がある（Python、Node.jsのバイナリ）
- Go、Rustのバイナリは通常追加のランタイム不要

### macOS
- 署名されていないバイナリは警告が出る
- notarizationが推奨される

### Linux
- glibcのバージョン互換性（古いディストリビューション対応）
- muslビルドで回避可能（Go、Rust）

## 結論

**エンドユーザーにとって最も手軽なのは：**
1. **Go**: 小さく、高速で、依存関係なし
2. **Rust**: 最小・最速だが、ビルド環境構築が複雑
3. **Python/Node.js**: バイナリ化すれば依存なしだが、サイズが大きい

**開発効率とのバランスを考慮した推奨：**
- **初期開発**: Python（AI/ML連携が容易）
- **配布最適化**: Go製CLIクライアント + Python APIサーバー